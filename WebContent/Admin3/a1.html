<!DOCTYPE html>
<html>
	<head>
    	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">  
		<title>图片上传</title>
		<meta name="renderer" content="webkit">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="format-detection" content="telephone=no">

		<link rel="stylesheet" href="plugins/layui/css/layui.css" media="all" />
		<link rel="stylesheet" href="plugins/font-awesome/css/font-awesome.min.css">
	</head>
<body>
	<blockquote class="layui-elem-quote">为节省服务器开销，以下示例均未配置真实上传接口，所以每次上传都会报提示：请求上传接口出现异常，这属于正常现象。</blockquote>   
	          
	<fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
	  <legend>常规使用：普通图片上传</legend>
	</fieldset>
	 
	<div class="layui-upload">
	  <button type="button" class="layui-btn" id="test1">上传图片</button>
	  <div class="layui-upload-list">
	    <img class="layui-upload-img" id="demo1">
	    <p id="demoText"></p>
	  </div>
	</div>  
	    <script src="plugins/layui/layui.all.js"></script>
	    
    <script>
	
	layui.use(['form','upload', 'jquery', 'layer'], function(){
		var upload = layui.upload; //得到 upload 对象
		//创建一个上传组件
		upload.render({
		   elem: '#test1'
		  ,url: 'http://localhost:8080/HTML2/user/testAjax.do'
		  ,before: function(obj){
		      //预读本地文件示例，不支持ie8
		      obj.preview(function(index, file, result){
		        $('#demo1').attr('src', result); //图片链接（base64）
		        return false;
		      });
		    }
		  ,done: function(res, index, upload){ //上传后的回调
		  	console.log(res,index,upload);
	        return false;
		  },
		  error:function(index,upload){
		  	return false;
		  }
		})
	}); 
	
	

    </script>
	 
</body>
</html>